<!--На сторінці Post-details.html:-->
<!--7 Вивести всю, без виключення, інформацію про об'єкт post на який клікнули .-->
<!--8 Нижче інформації про пост вивести всі коментарі поточного поста (ендпоінт  -
https://jsonplaceholder.typicode.com/posts/POST_ID/comments)-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Post details</title>
    <style>
        body{
            background: lightgray;
            margin: 0;
            overflow-x: hidden;
            width: 100vw;
        }
        #postDetails{
            justify-content: center;
            text-align:center;
            background-color: #fcf5f5;
            width: 30%;
            height: 35%;
            position: absolute;
            left: 50%;
            top: 30%;
            transform: translate(-50%, -50%);
            padding: 5px;
        }
    </style>
</head>
<body>
<h1 style="margin: 30px; text-align:center"><i>Post Details</i></h1>
<div id="postDetails"></div>
<h2 style="margin: 30px; text-align:center"><i>Post Comments</i></h2>
<div id="postComments">
    <ul id="commentsList"></ul>
</div>
<script>
    // console.log(location.href);
    let postId = new URL(location.href).searchParams.get('posts');
    // console.log(postId);
    fetch(`https://jsonplaceholder.typicode.com/posts/${postId}`)
        .then(response => response.json())
        .then(post => {
            let postBlock = document.getElementById('postDetails');
            for (const postsKey in post) {
                // console.log(post);
                // console.log(`${post.id}`);
                // console.log(postsKey, post[postsKey]);
                let p = document.createElement('p');
                p.innerText = postsKey + ": " + post[postsKey];
                postBlock.appendChild(p);
            }

            }
        )



    let comments = fetch(`https://jsonplaceholder.typicode.com/posts/${postId}/comments`)
        .then(response => response.json())
        .then(comments => {
            // console.log(comments);
            let postComments = document.getElementById('postComments');
            let ul = document.getElementById('commentsList');
            for (const comment of comments) {
                    // console.log(comment);
                for (const commentKey in comment) {
                    let li = document.createElement('li');
                    li.innerText = commentKey + ": " + comment[commentKey];
                    ul.append(li);
                }
                let divComment = document.createElement('div');
                divComment.append(ul);
                postComments.appendChild(divComment);
                }

            }
        )
</script>
</body>
</html>